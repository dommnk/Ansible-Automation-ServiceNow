# demo_setup.yml
---
- hosts: localhost
  gather_facts: False

  tasks:

    - name: Provision an EC2 instance with a public IP address
      ec2_instance:
        name: Demo Instance from Ansible
        aws_access_key: "{{ec2_access_key}}"
        aws_secret_key: "{{ec2_secret_key}}"
        key_name: "{{ key_name }}"
        region: eu-central-1
        vpc_subnet_id: "{{ vpc_subnet_id }}"
        instance_type: t2.nano
        security_group: Remote Access
        network:
          assign_public_ip: true
        image_id: "{{ image_id }}"
        tags:
          Environment: Testing ansible connection with AWS
      register: result
